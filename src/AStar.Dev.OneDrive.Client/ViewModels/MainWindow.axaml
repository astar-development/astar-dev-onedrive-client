<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="https://github.com/avaloniaui"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        Width="1000" Height="820"
        Title="OneDrive Sync"
        Icon="avares://AStar.Dev.OneDrive.Client/Assets/astar.ico"
        x:Class="AStar.Dev.OneDrive.Client.ViewModels.MainWindow">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key='Light'>
                    <SolidColorBrush x:Key='BackgroundBrush'>DarkGreen</SolidColorBrush>
                    <SolidColorBrush x:Key='ForegroundBrush'>White</SolidColorBrush>
                </ResourceDictionary>
                <ResourceDictionary x:Key='Dark'>
                    <SolidColorBrush x:Key='BackgroundBrush'>SpringGreen</SolidColorBrush>
                    <SolidColorBrush x:Key='ForegroundBrush'>Black</SolidColorBrush>
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>
        </ResourceDictionary>
    </Window.Resources>

    <Window.Styles>
        <Style Selector="Button">
            <Setter Property="Background" Value="{DynamicResource BackgroundBrush}" />
            <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
        </Style>
        <Style Selector="TextBlock">
            <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
          </Style>
          <Style Selector="Label">
              <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}" />
          </Style>
    </Window.Styles>

  <DockPanel>
    <Border DockPanel.Dock="Top" Padding="16">
      <Grid ColumnDefinitions="*,*,Auto,Auto" VerticalAlignment="Center">
        <Border Grid.Column="0" Background="Gainsboro" BorderBrush="Black" BorderThickness="2" CornerRadius="5" Padding="10" Margin="10">
          <StackPanel Orientation="Vertical" Spacing="12" VerticalAlignment="Center">
            <TextBlock Text="OneDrive Sync" FontSize="30" FontWeight="ExtraBold" />
            <Button Content="Sign In" Command="{Binding SignInCommand}" Margin="4" IsVisible="{Binding !SignedIn}"/>
            <Button Content="Initial Full Sync" Command="{Binding InitialSyncCommand}" Margin="4"/>
            <Button Content="Incremental Sync" Command="{Binding IncrementalSyncCommand}" Margin="4"/>
            <Button Content="Cancel Sync" Command="{Binding CancelSyncCommand}" Margin="4" Background="OrangeRed"/>
          </StackPanel>
        </Border>

        <Border Grid.Column="1" Background="Gainsboro" BorderBrush="Black" BorderThickness="2" CornerRadius="5" Padding="10" Margin="10">
          <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
            <Grid ColumnDefinitions="*,*">
              <StackPanel Grid.Column="0">
                <Label Content="Maximum Parallel Downloads" FontWeight="ExtraBold" />
                <NumericUpDown Increment="1" Value="{Binding UserPreferences.UiSettings.SyncSettings.MaxParallelDownloads}" Minimum="1" Maximum="10" />
                <Label Content="Download Batch Size" FontWeight="ExtraBold" />
                <NumericUpDown Increment="1" Value="{Binding UserPreferences.UiSettings.SyncSettings.DownloadBatchSize}" Minimum="1" Maximum="100" />
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>
        
        <Border Grid.Column="2" Background="Gainsboro" BorderBrush="Black" BorderThickness="2" CornerRadius="5" Padding="10" Margin="10">
          <StackPanel Orientation="Horizontal" Spacing="12" VerticalAlignment="Center">
            <Grid ColumnDefinitions="*,*">
              <StackPanel Grid.Column="1">
                <ToggleSwitch Content="Download After Sync" IsChecked="{Binding UserPreferences.UiSettings.DownloadFilesAfterSync}" FontWeight="ExtraBold" />
                <ToggleSwitch Content="Upload After Sync" IsChecked="{Binding UserPreferences.UiSettings.UploadFilesAfterSync}" FontWeight="ExtraBold" />
                <ToggleSwitch Content="Remember Me" IsChecked="{Binding UserPreferences.UiSettings.RememberMe}" FontWeight="ExtraBold" />
              </StackPanel>
            </Grid>
          </StackPanel>
        </Border>

        <Border Grid.Column="3" Background="Gainsboro" BorderBrush="Black" BorderThickness="2" CornerRadius="5" Padding="10" Margin="10">
          <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center">
            <TextBlock Text="Theme:" VerticalAlignment="Center" FontWeight="ExtraBold" />
            <ComboBox Name="ThemeSelector" Width="120" SelectedIndex="0" VerticalAlignment="Center" >
              <ComboBoxItem Content="Auto" />
              <ComboBoxItem Content="Light" />
              <ComboBoxItem Content="Dark" />
            </ComboBox>
          </StackPanel>
        </Border>
      </Grid>
    </Border>

    <Border DockPanel.Dock="Top" Padding="16">
      <Grid Margin="8">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="2*"/>
          <ColumnDefinition Width="3*"/>
        </Grid.ColumnDefinitions>

        <Border Grid.Column="0" Background="Gainsboro" BorderBrush="Black" BorderThickness="2" CornerRadius="5" Padding="10" Margin="10">
        <StackPanel Grid.Column="0" Margin="8">
          <TextBlock Text="Sync Stats" FontWeight="Bold" Margin="0,0,0,8"/>
          <TextBlock Text="{Binding SyncStatus}" Margin="0,0,0,10"/>
          <TextBlock Text="Pending Downloads:"/>
          <TextBlock Text="{Binding PendingDownloads}" Margin="0,0,0,10"/>
          <TextBlock Text="Pending Uploads:"/>
          <TextBlock Text="{Binding PendingUploads}" Margin="0,0,0,10"/>

          <!-- Performance Metrics -->
          <TextBlock Text="Transfer Speed:" IsVisible="{Binding TransferSpeed, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
          <TextBlock Text="{Binding TransferSpeed}" Margin="0,0,0,10" IsVisible="{Binding TransferSpeed, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
          <TextBlock Text="Time Remaining:" IsVisible="{Binding EstimatedTimeRemaining, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
          <TextBlock Text="{Binding EstimatedTimeRemaining}" Margin="0,0,0,10" IsVisible="{Binding EstimatedTimeRemaining, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
          <TextBlock Text="Elapsed Time:" IsVisible="{Binding ElapsedTime, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>
          <TextBlock Text="{Binding ElapsedTime}" Margin="0,0,0,10" IsVisible="{Binding ElapsedTime, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

          <ProgressBar Minimum="0" Maximum="100" Value="{Binding ProgressPercent}" ShowProgressText="True" Foreground="Green" Background="LightGray" Height="20" Margin="0,8,0,8"/>
        </StackPanel>
        </Border>

        <Border Grid.Column="1" Background="Gainsboro" BorderBrush="Black" BorderThickness="2" CornerRadius="5" Padding="10" Margin="10">
        <StackPanel Grid.Column="1" Margin="8">
          <TextBlock Text="Recent Transfers" FontWeight="Bold" Margin="0,0,0,8"/>
          <ListBox ItemsSource="{Binding RecentTransfers}" Height="360" Background="LightGray" Foreground="Black"/>
        </StackPanel>
        </Border>

      </Grid>
    </Border>

  </DockPanel>
</Window>
